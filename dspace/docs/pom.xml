<?xml version='1.0' encoding='UTF-8'?>
<!--
This POM simply transforms all DocBook Docs to Confluence format,
using the provided XSL stylesheet at:
confluence/docBook2confluence.xsl

To run confluence transformation just execute

mvn package

in this directory.

NOTE: You may receive errors for XML Entities which are undefined in any
individual Docbook XML file.  For example: "Error reported by XML parser:
The entity "mdash" was referenced, but not declared."

If you receive the above errors, temporarily add the ENTITY reference to the top
of each DocBook XML. (They are not there by default as it breaks PDF creation)
For example:

<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
                    "http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd" [
<!ENTITY mdash "&#x2014;">
]>
<chapter>
...

This pom is not included as a module to reduce unnecessary compilation time.
-->
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>org.dspace</groupId>
    <artifactId>dspace-docs</artifactId>
    <name>DSpace Documentation Module</name>
    <packaging>pom</packaging>

    <!--
       A Parent POM that Maven inherits DSpace Default
       POM atrributes from.
    -->
    <parent>
        <groupId>org.dspace</groupId>
        <artifactId>dspace-parent</artifactId>
        <version>1.6.1-SNAPSHOT</version>
    </parent>
	
    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>xml-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <goals>
                            <goal>transform</goal>
                        </goals>
                        <phase>package</phase>
                    </execution>
                </executions>
                <configuration>
                    <transformationSets>
                        <transformationSet>
                            <dir>docbook</dir>
                            <outputDir>confluence</outputDir>
                            <includes>
                                <include>**/*.xml</include>
                            </includes>
                            <excludes>
                                <exclude>book.xml</exclude>
                                <exclude>print.xsl</exclude>
                                <exclude>html.xsl</exclude>
                            </excludes>
                            <stylesheet>confluence/docBook2confluence.xsl</stylesheet>
                            <fileMappers>
                                <fileMapper
                                        implementation="org.codehaus.plexus.components.io.filemappers.FileExtensionMapper">
                                    <targetExtension>.txt</targetExtension>
                                </fileMapper>
                            </fileMappers>
                        </transformationSet>
                    </transformationSets>
                    <!--<catalogs>
                        <catalog>confluence/catalog.xml</catalog>
                    </catalogs>-->
                </configuration>

                <dependencies>
                    <dependency>
                        <groupId>net.sf.saxon</groupId>
                        <artifactId>saxon</artifactId>
                        <version>8.7</version>
                    </dependency>
                </dependencies>
            </plugin>
        </plugins>
    </build>
</project>
